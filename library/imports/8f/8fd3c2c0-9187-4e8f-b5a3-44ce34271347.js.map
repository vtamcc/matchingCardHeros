{"version":3,"sources":["assets\\MatchingCardHeros\\scripts\\game\\CardHero.GameView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { Global } from \"../CardHero.Global\";\r\nimport Card from \"./CardHero.Card\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameView extends cc.Component {\r\n   public static instance: GameView = null;\r\n   @property(cc.Prefab)\r\n   prfCard: cc.Prefab = null;\r\n   @property(cc.SpriteFrame)\r\n   listSpfCards: cc.SpriteFrame[] = [];\r\n   @property(cc.Node)\r\n   nTableCards: cc.Node = null;\r\n   @property(cc.Label)\r\n   lbHpChar: cc.Label = null;\r\n   @property(cc.Label)\r\n   lbHpBagGuy: cc.Label = null;\r\n   @property(cc.Node)\r\n   nMaskClick: cc.Node = null;\r\n   @property(cc.Node)\r\n   nMaskLoadGame: cc.Node = null;\r\n   isClick = false;\r\n   countClick = 0;\r\n   listIdCard = [0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12];\r\n   selectedCards = [];\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        GameView.instance = this;\r\n        this.listIdCard = this.shuffleArray(this.listIdCard);\r\n        this.maskLoadGame();\r\n        this.scheduleOnce(() => {\r\n            this.loadCards();\r\n        },1)\r\n        this.updateHpChar();\r\n        this.updateHpBagGuy();\r\n    }\r\n\r\n    maskLoadGame() {\r\n        this.nMaskLoadGame.active = true;\r\n        this.scheduleOnce(() => {\r\n            this.nMaskLoadGame.active = false;\r\n        },5)\r\n    }\r\n\r\n    loadCards() {\r\n        for(let i = 0; i < 25; i++) {\r\n            let card = cc.instantiate(this.prfCard).getComponent(Card)\r\n            card.setData(this.listIdCard[i])\r\n            this.nTableCards.addChild(card.node);\r\n        }\r\n    }\r\n\r\n    shuffleArray(array: number[]): number[] {\r\n        for (let i = array.length-1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n\r\n    addSelectedCard(card: Card) {\r\n        if (this.selectedCards.length < 2) {\r\n            this.selectedCards.push(card);\r\n            if (this.selectedCards.length === 2) {\r\n                this.scheduleOnce(this.checkMatch.bind(this), 1); // Delay to show the cards\r\n            }\r\n        }\r\n    }\r\n\r\n   \r\n    checkMatch() {\r\n        let [firstCard, secondCard] = this.selectedCards;\r\n        console.log(\"Mang \",this.selectedCards);\r\n        if (firstCard.idCard === secondCard.idCard) {\r\n           this.selectAttack(firstCard.idCard);\r\n           firstCard.node.destroy();\r\n           secondCard.node.destroy();\r\n        } else {\r\n            // firstCard.flipCard();\r\n            // secondCard.flipCard();\r\n            console.log(\"sai me roi\");\r\n        }\r\n        this.selectedCards = [];\r\n    }\r\n\r\n   selectAttack(id) {\r\n        switch (id) {\r\n            case 0:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            case 1:\r\n                console.log(\"Mau ne \");\r\n                break\r\n            case 2:\r\n                console.log(\"Cung nho ban \");\r\n                break\r\n            case 3:\r\n                console.log(\"Cung Tb báº¯n \");\r\n                break\r\n            case 4:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            case 5:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            case 6:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            case 7:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            case 8:\r\n                console.log(\"Giap ne \");\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n   }\r\n    start () {\r\n\r\n    }\r\n\r\n    updateHpChar() {\r\n        this.lbHpChar.string = Global.hpChar + ' ';\r\n    }\r\n\r\n    updateHpBagGuy() {\r\n        this.lbHpBagGuy.string = Global.hpBagGuy + ' ';\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}